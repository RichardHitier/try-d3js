<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>

    svg {
      background-color: #f2f2f2;
      border: 1pt solid black;
    }

    #chart_grouped_bar {
      float: left;
      width: 100%;
      /*height: 300px;*/
      margin-right: auto;
      margin-left: auto;
      text-align: top;
    }
  </style>

</head>
<body id="body">

  <!-- Create a div where the circles will take place -->
  <div id="chart_grouped_bar"></div>

  <!-- Load d3.js -->
  <script src="https://d3js.org/d3.v6.min.js"></script>
  <script>

    d3.csv("http://localhost:5000/charge/project/8/capacity").then((data) => {
      var categories = data.columns.slice(1)
      console.log(categories)
      // console.log(data)
      var periods = d3.map(data, d => d.period)
      console.log(periods)
      // var first_row = data[0]
      // var this_values = Object.values(first_row).slice(1)
      // console.log(this_values)
      //
      // var this_max = d3.max(this_values)
      // console.log(this_max)
      console.log(d3.max(data, function (d) {

            var p_max = d3.max(categories, function (c) {
              var categorie_value = d[c]
              // console.log(d3.keys(d))
              console.log(c, categorie_value);
              return +categorie_value
            })
            console.log(d['period'], ' ----------------------------- ', p_max)
            return p_max
          })
      )
    });


  </script>

</body>
</html>
